{"mappings":"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","sources":["src/js/03-promises.js"],"sourcesContent":["import Notiflix from 'notiflix';\n\nconst formArea = document.querySelector('.form');\nconst inputFields = document.querySelectorAll('input');\nconst submitButton = document.querySelector('button[type=\"submit\"]');\n\n// ------------------- STYLES BEGIN -------------------\n\n// POPULATING HTML:\n\nconst headTitle = document.head.querySelector('title');\n\nheadTitle.insertAdjacentHTML(\n  'afterend',\n  `<link rel=\"preconnect\" href=\"https://fonts.googleapis.com\" />\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin />\n    <link\n      href=\"https://fonts.googleapis.com/css2?family=VT323&display=swap\"\n      rel=\"stylesheet\"\n    />\n    <link\n      rel=\"preload\"\n      href=\"https://upload.wikimedia.org/wikipedia/commons/8/8a/10x10_checkered_board_transparent.svg\"\n      as=\"image\"\n      type=\"image/svg+xml\"\n      crossorigin\n    />`\n);\n\nconst label = document.querySelectorAll('label');\n\n[...label].forEach(element => {\n  element.insertAdjacentHTML(\n    'beforeend',\n    `<div class=\"input-background\"></div>`\n  );\n});\n\nlabel[label.length - 1].insertAdjacentHTML(\n  'afterend',\n  `<div class=\"progress\">\n        <div class=\"generator\"></div>\n        <div class=\"spiner\"></div>\n      </div>`\n);\n\nformArea.insertAdjacentHTML('afterend', `<div class=\"fancy\"></div>`);\n\n[...inputFields].forEach(element => {\n  element.setAttribute('min', 1);\n});\n\n// POPULATING STYLES:\n\ndocument.body.style.cssText = `overflow: hidden; width: 100vw; height: 100vh; background: radial-gradient(transparent, #e9e9e9);`;\n\ndocument.styleSheets[0].insertRule(`@-webkit-keyframes anim-gradient {\n  0% {\n    background-position: -50% -50%;\n  }\n  25% {\n    background-position: 75% 200%;\n  }\n  50% {\n    background-position: 200% -50%;\n  }\n  75% {\n    background-position: 75% -200%;\n  }\n  100% {\n    background-position: -50% -50%;\n  }\n}`);\n\ndocument.styleSheets[0].insertRule(`@keyframes anim-gradient {\n  0% {\n    background-position: -50% -50%;\n  }\n  25% {\n    background-position: 75% 200%;\n  }\n  50% {\n    background-position: 200% -50%;\n  }\n  75% {\n    background-position: 75% -200%;\n  }\n  100% {\n    background-position: -50% -50%;\n  }\n}`);\n\ndocument.styleSheets[0].insertRule(`.fancy {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 200%;\n  height: 200%;\n  transform: translate(-50%, -50%) rotate(-45deg);\n  overflow: hidden;\n  z-index: -1;\n  background-image: url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' height='19px' width='330px'><text x='0' y='15' fill='%23eeeeee' font-size='20' style='font-family:Arial, sans-serif'>Sorry mate, no fancy styling this time.</text></svg>\");\n  background-size: 200%;\n  -webkit-filter: blur(1px);\n  filter: blur(1px);\n  -webkit-animation: anim-gradient 180s linear infinite;\n  animation: anim-gradient 180s linear infinite;\n}`);\n\ndocument.styleSheets[0].insertRule(`.form {\n  position: relative;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 400px;\n  height: 500px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 30px;\n  background-color: #00f;\n  box-shadow: 0 0 0 3px #0ff, 0 0 0 5px #00f, 0 0 0 8px #0ff, 0 0 0 12px #00f,\n    15px 15px 0px 10px #00000099;\n  color: #0ff;\n  font-family: 'VT323', monospace;\n  font-size: 20px;\n  -webkit-font-smoothing: none;\n}`);\n\ndocument.styleSheets[0].insertRule(`.form::before {\n  content: 'PROMISE GENERATOR';\n  position: absolute;\n  top: 0%;\n  left: 50%;\n  height: 15px;\n  transform: translate(-50%, -11px);\n  background-color: #0ff;\n  color: #00f;\n  padding: 1px 5px 0px 5px;\n  vertical-align: text-top;\n  line-height: 12px;\n}`);\n\ndocument.styleSheets[0].insertRule(`label {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 100%;\n  margin-top: 10px;\n}`);\n\ndocument.styleSheets[0].insertRule(`label:first-of-type {\n  margin-top: 100px;\n}`);\n\ndocument.styleSheets[0].insertRule(`.input-background {\n  pointer-events: none;\n  position: absolute;\n  right: 30px;\n  display: block;\n  width: 180px;\n  height: 22px;\n  background-color: #00ffff96;\n  -webkit-mask-image: url(https://upload.wikimedia.org/wikipedia/commons/8/8a/10x10_checkered_board_transparent.svg);\n  mask-image: url(https://upload.wikimedia.org/wikipedia/commons/8/8a/10x10_checkered_board_transparent.svg);\n  -webkit-mask-size: 12%;\n  mask-size: 12%;\n  -webkit-mask-repeat: repeat;\n  mask-repeat: repeat;\n}`);\n\ndocument.styleSheets[0].insertRule(`.focused {\n  -webkit-mask-image: none !important;\n  mask-image: none !important;\n}`);\n\ndocument.styleSheets[0].insertRule(`input[type='number'] {\n  z-index: 1;\n  width: 180px;\n  height: 22px;\n  padding: 0 5px 0;\n  font-family: inherit;\n  font-size: inherit;\n  outline: none;\n  caret-color: #f00;\n  border: solid 2px transparent;\n  background-color: transparent;\n  color: #fff;\n  -moz-appearance: textfield;\n}`);\n\ndocument.styleSheets[0]\n  .insertRule(`input[type='number']::-webkit-outer-spin-button,\ninput[type='number']::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n}`);\n\ndocument.styleSheets[0].insertRule(`input[type='number']:focus {\n  border: dotted 2px #00ffff96;\n}`);\n\ndocument.styleSheets[0].insertRule(`.progress {\n  position: absolute;\n  top: 280px;\n  left: 50%;\n  width: 130px;\n  height: 30px;\n  transform: translate(-50%, 0);\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}`);\n\ndocument.styleSheets[0].insertRule(`.generator {\n  width: 100px;\n}`);\n\ndocument.styleSheets[0].insertRule(`.spiner {\n  width: 25px;\n  text-align: center;\n}`);\n\ndocument.styleSheets[0].insertRule(`.done {\n  width: 100%;\n  text-align: center;\n}`);\n\ndocument.styleSheets[0].insertRule(`button[type='submit'] {\n  cursor: pointer;\n  display: block;\n  width: 150px;\n  height: 50px;\n  background-color: #fff;\n  border: none;\n  outline: none;\n  box-shadow: 5px 5px 0px 0px #00000099;\n  font-family: inherit;\n  font-size: inherit;\n  text-transform: uppercase;\n  text-align: center;\n  margin-top: 120px;\n}`);\n\ndocument.styleSheets[0].insertRule(`button[type='submit']:focus,\nbutton[type='submit']:hover {\n  background-color: #ff0;\n}`);\n\ndocument.styleSheets[0].insertRule(`button[type='submit']:active {\n  background-color: #ff0;\n  box-shadow: none;\n  transform: translate(5px, 5px);\n}`);\n\ndocument.styleSheets[0].insertRule(`button[type='submit']:disabled {\n  cursor: not-allowed;\n  background-color: silver;\n  color: gray;\n}`);\n\ndocument.styleSheets[0]\n  .insertRule(`button[type='submit']:disabled:focus, button[type='submit']:disabled:hover {\n  background-color: silver;\n}`);\n\ndocument.styleSheets[0].insertRule(`button[type='submit']:disabled:active {\n  transform: none;\n  box-shadow: 5px 5px 0px 0px #00000099;\n}\n`);\n\n// ADDING ANIMATIONS:\n\n[...inputFields].forEach(element => {\n  element.addEventListener('focus', event => {\n    event.target.nextElementSibling.classList.add('focused');\n  });\n  element.addEventListener('blur', event => {\n    event.target.nextElementSibling.classList.remove('focused');\n  });\n});\n\nconst progressBar = {\n  progress: document.querySelector('.progress'),\n  generator: document.querySelector('.generator'),\n  spiner: document.querySelector('.spiner'),\n  generatorTimer: undefined,\n  spinerTimer: undefined,\n  genStepVar: 1,\n  spinStepVar: 1,\n\n  start() {\n    this.generatorTimer = setInterval(() => {\n      switch (this.genStepVar) {\n        case 1:\n          this.generator.textContent = 'Resolving';\n          this.genStepVar += 1;\n          break;\n        case 2:\n          this.generator.textContent = 'Resolving.';\n          this.genStepVar += 1;\n          break;\n        case 3:\n          this.generator.textContent = 'Resolving..';\n          this.genStepVar += 1;\n          break;\n        case 4:\n          this.generator.textContent = 'Resolving...';\n          this.genStepVar = 1;\n          break;\n      }\n    }, 500);\n    this.spinerTimer = setInterval(() => {\n      switch (this.spinStepVar) {\n        case 1:\n          this.spiner.textContent = '╱';\n          this.spinStepVar += 1;\n          break;\n        case 2:\n          this.spiner.textContent = '──';\n          this.spinStepVar += 1;\n          break;\n        case 3:\n          this.spiner.textContent = '╲';\n          this.spinStepVar += 1;\n          break;\n        case 4:\n          this.spiner.textContent = '│';\n          this.spinStepVar = 1;\n          break;\n      }\n    }, 200);\n  },\n\n  done() {\n    clearInterval(this.generatorTimer);\n    this.generatorTimer = undefined;\n    clearInterval(this.spinerTimer);\n    this.spinerTimer = undefined;\n    this.progress.innerHTML = `<div class=\"done\">Done!</div>`;\n    setTimeout(() => {\n      this.progress.innerHTML = `<div class=\"generator\"></div>\n        <div class=\"spiner\"></div>`;\n      this.generator = document.querySelector('.generator');\n      this.spiner = document.querySelector('.spiner');\n    }, 2000);\n  },\n};\n\n// -------------------- STYLES END --------------------\n\nlet promiseDelay = null;\nlet promiseStep = null;\nlet promiseAmount = null;\nlet promiseElapsed = null;\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      promiseElapsed = delay;\n      const shouldResolve = Math.random() > 0.3;\n      if (shouldResolve) {\n        resolve(position);\n      } else {\n        reject(position);\n      }\n    }, delay);\n  });\n}\n\nconst formManipulate = {\n  block() {\n    submitButton.disabled = true;\n    [...inputFields].forEach(element => {\n      element.disabled = true;\n    });\n  },\n\n  reset() {\n    formArea.reset();\n    submitButton.disabled = false;\n    [...inputFields].forEach(element => {\n      element.disabled = false;\n    });\n  },\n};\n\nformArea.addEventListener('submit', event => {\n  event.preventDefault();\n  promiseDelay = parseInt(event.currentTarget.elements[0].value);\n  promiseStep = parseInt(event.currentTarget.elements[1].value);\n  promiseAmount = parseInt(event.currentTarget.elements[2].value);\n\n  progressBar.start();\n  formManipulate.block();\n\n  for (let i = 0; i < promiseAmount; i += 1) {\n    createPromise(i + 1, promiseDelay + promiseStep * i)\n      .then(value => {\n        Notiflix.Notify.success(\n          `Promise No.${value} was fulfilled at ${promiseElapsed}ms.`,\n          {\n            timeout: 5000,\n          }\n        );\n        if (value === promiseAmount) {\n          progressBar.done();\n          formManipulate.reset();\n        }\n      })\n      .catch(value => {\n        Notiflix.Notify.failure(\n          `Promise No.${value} was rejected at ${promiseElapsed}ms.`,\n          {\n            timeout: 5000,\n          }\n        );\n        if (value === promiseAmount) {\n          progressBar.done();\n          formManipulate.reset();\n        }\n      });\n  }\n});\n"],"names":["$eWCmQ","parcelRequire","$47d4ff9957288465$var$formArea","document","querySelector","$47d4ff9957288465$var$inputFields","querySelectorAll","$47d4ff9957288465$var$submitButton","head","insertAdjacentHTML","$47d4ff9957288465$var$label","forEach","element","length","setAttribute","body","style","cssText","styleSheets","insertRule","addEventListener","event","target","nextElementSibling","classList","add","remove","$47d4ff9957288465$var$progressBar","progress","generator","spiner","generatorTimer","undefined","spinerTimer","genStepVar","spinStepVar","start","this","setInterval","textContent","done","clearInterval","innerHTML","setTimeout","$47d4ff9957288465$var$promiseDelay","$47d4ff9957288465$var$promiseStep","$47d4ff9957288465$var$promiseAmount","$47d4ff9957288465$var$promiseElapsed","$47d4ff9957288465$var$createPromise","position","delay","Promise","resolve","reject","Math","random","$47d4ff9957288465$var$formManipulate","block","disabled","reset","preventDefault","parseInt","currentTarget","elements","value","i","then","$parcel$interopDefault","Notify","success","timeout","catch","failure"],"version":3,"file":"03-promises.86b3b30b.js.map"}